<!DOCTYPE html>
<html>
<head>
<style>
#info {
  position: absolute;
  top: 0px;
  width: 100%;
  padding: 10px;
  text-align: center;
  color: #ffff00
}

body {
  overflow: hidden;
}

</style>
</head>

<body>
<div id="info">Homework 1
<br>
<button id='pause'>
Pause
</button>
<button id='restart'>
Restart
</button>
<button id='switch'>
連續/不連續
</button>
<br>
<p id='state'>
  </p>
</div>
<script src="https://threejs.org/build/three.min.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js">
</script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>


<script>

$('#pause').click (

   function() {
      pause = !pause;
      clearInterval(timer);
      clearInterval(c_timer);
      if(!pause)
      {
      	var tmp_timer = setTimeout(pauseToStart,1000-((c_time*100)%1000));
        
        
        
        /////////////////////////////////
      	c_timer = setInterval(c_one,10);
      }
    }
);
$('#restart').click (

   function() {
      time = 0;
      clearInterval(timer);
      timer = setInterval(one,1000);
      //////////////////
      c_time = 0;
      clearInterval(c_timer);
      c_timer = setInterval(c_one,10);
      
    }
);
$('#switch').click (
   function() {
      continous = !continous;
    }
);


var camera, scene, renderer, timer ,c_timer;
var pointer;
var time = 0 , c_time = 0;
var continous = false , pause = false;

init();
animate();

function init() {

  scene = new THREE.Scene();

  renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setClearColor(0x888888);
  document.body.appendChild(renderer.domElement);

  camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
  camera.position.set(0,55,0);
  let controls = new THREE.OrbitControls(camera, renderer.domElement);

  
  var circle = new THREE.Mesh (new THREE.CircleGeometry (15,32), new THREE.MeshBasicMaterial({color:'white'}));
  circle.rotation.x = -Math.PI/2;
  
   pointer = new THREE.Group();
  
  var rectangle = new THREE.Mesh (new THREE.PlaneGeometry (0.5,8), new THREE.MeshBasicMaterial({color:'black'}));
  rectangle.rotation.x = -Math.PI/2;
  rectangle.position.set(0,0.2,-3);
 
  pointer.add(rectangle);
  
///////////////////////////////////////////////////////////
  scene.add(circle,pointer);
  
  buildScale();

   
  timer = setInterval(one,1000);
  c_timer = setInterval(c_one,10);
  
  
  

	
}
function one(){
	time += 1;

}
function c_one(){
	c_time += 1;

}

function animate() {

  requestAnimationFrame(animate);
  render();
 
 if(continous)
  pointer.rotation.y = -c_time*(Math.PI/3000);
  else
  pointer.rotation.y = -time*(Math.PI/30);
 
  
}
function pauseToStart()
{
	time += 1;
  timer = setInterval(one,1000);
}
function buildScale()
{
var b1 = new THREE.Mesh (new THREE.CircleGeometry (1.5,16), new THREE.MeshBasicMaterial({color:'red'}));
b1.rotateX(-Math.PI/2)
b1.position.set(0,0.2,-13);
var b2 = new THREE.Mesh (new THREE.CircleGeometry (1.5,16), new THREE.MeshBasicMaterial({color:'red'}));
b2.rotateX(-Math.PI/2)
b2.position.set(13,0.2,0);
var b3 = new THREE.Mesh (new THREE.CircleGeometry (1.5,16), new THREE.MeshBasicMaterial({color:'red'}));
b3.rotateX(-Math.PI/2)
b3.position.set(-13,0.2,0);
var b4 = new THREE.Mesh (new THREE.CircleGeometry (1.5,16), new THREE.MeshBasicMaterial({color:'red'}));
b4.rotateX(-Math.PI/2)
b4.position.set(0,0.2,13);



scene.add(b1,b2,b3,b4);

}

function render() {

  renderer.render(scene, camera);

}


</script>
</body>

</html>